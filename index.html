<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <title>Kalkulator Półek na filamenty z systemu IKEA Komplement</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    h1 {
      margin-bottom: 10px;
    }
    label, select, input {
      display: block;
      margin: 10px 0;
    }
    .row {
      display: flex;
      gap: 40px;
    }
    .column {
      flex: 1;
    }
    #shelf-container {
      display: flex;
      align-items: center;
      margin-top: 20px;
      flex-wrap: wrap;
    }
    .bracket {
      width: 10px;
      height: 40px;
      margin: 0 2px;
    }
    .bracket-left, .bracket-right {
      background-color: green;
    }
    .bracket-join {
      background-color: red;
    }
    .support {
      width: 6px;
      height: 30px;
      background-color: yellow;
      margin-left: 4px;
    }
    .pipe {
      height: 10px;
      display: inline-block;
    }
    .segment {
      display: flex;
      align-items: center;
    }
    .legend {
      margin-top: 10px;
      font-size: 14px;
    }
    .output-box {
      border: 1px solid #ccc;
      padding: 10px;
      margin-top: 10px;
      background-color: #f9f9f9;
    }
  </style>
</head>
<body>

<h1>Kalkulator Półek na filamenty z systemu IKEA Komplement</h1>

<label for="seg50">Segmenty z IKEA Komplement 50 cm:</label>
<input type="number" id="seg50" value="0" min="0">

<label for="seg75">Segmenty z IKEA Komplement 75 cm:</label>
<input type="number" id="seg75" value="0" min="0">

<label for="seg100">Segmenty z IKEA Komplement 100 cm:</label>
<input type="number" id="seg100" value="0" min="0">

<label for="pipeColor">Kolor drążków:</label>
<select id="pipeColor">
  <option value="bialy">Biały</option>
  <option value="szary">Szary</option>
</select>

<button onclick="calculate()">Oblicz</button>

<div class="output-box">
  <h3>Długość</h3>
  <p id="dimensions"></p>
</div>

<div class="row">
  <div class="column">
    <h3>Wymiary i wsporniki</h3>
    <pre id="output"></pre>
  </div>
  <div class="column">
    <h3>Zakupy w IKEA</h3>
    <pre id="shoppingList"></pre>
  </div>
</div>

<div id="shelf-container"></div>

<div class="legend">
  <strong>Legenda:</strong><br>
  <span style="color: green;">Zielony</span> - wspornik lewy/prawy<br>
  <span style="color: red;">Czerwony</span> - wspornik łączący<br>
  <span style="color: yellow;">Złoty</span> - wspornik podtrzymujący (dla 75 i 100 cm)
</div>

<script>
function calculate() {
  const seg50 = parseInt(document.getElementById("seg50").value) || 0;
  const seg75 = parseInt(document.getElementById("seg75").value) || 0;
  const seg100 = parseInt(document.getElementById("seg100").value) || 0;
  const color = document.getElementById("pipeColor").value;

  const segmentLengths = {
    50: 45,
    75: 70,
    100: 95
  };

  const bracketLeftRight = 2;
  const bracketJoining = 1;

  const totalSegments = seg50 + seg75 + seg100;

  const totalPipeLength = seg50 * segmentLengths[50] +
                          seg75 * segmentLengths[75] +
                          seg100 * segmentLengths[100];

  const totalLength = totalPipeLength + bracketLeftRight * 2 +
    (totalSegments > 1 ? (totalSegments - 1) * bracketJoining : 0);

  document.getElementById("dimensions").innerText = `${totalLength} cm`;

  const leftRightBrackets = totalSegments > 0 ? 2 : 0;
  const joinBrackets = totalSegments > 1 ? (totalSegments - 1) : 0;
  const supportBrackets = seg75 + seg100;

  let output = "";
  if (leftRightBrackets > 0) {
    output += `• 1 × Wspornik lewy (zielony)\n`;
    output += `• 1 × Wspornik prawy (zielony)\n`;
  }
  if (joinBrackets > 0) output += `• ${joinBrackets} × Wspornik łączący (czerwony)\n`;
  if (supportBrackets > 0) output += `• ${supportBrackets} × Wspornik podtrzymujący (żółty)`;

  document.getElementById("output").innerText = output.trim();

  let shoppingList = "";
  if (totalSegments === 0) {
    shoppingList = "Brak segmentów.";
  } else {
    const kod = {
      bialy: {
        50: "902.568.93",
        75: "402.568.95",
        100: "302.568.91"
      },
      szary: {
        50: "402.569.42",
        75: "002.569.44",
        100: "802.569.40"
      }
    };
    if (seg50 > 0) shoppingList += `• ${seg50 * 2} × KOMPLEMENT 50 cm — ${kod[color][50]}\n`;
    if (seg75 > 0) shoppingList += `• ${seg75 * 2} × KOMPLEMENT 75 cm — ${kod[color][75]}\n`;
    if (seg100 > 0) shoppingList += `• ${seg100 * 2} × KOMPLEMENT 100 cm — ${kod[color][100]}\n`;
  }
  document.getElementById("shoppingList").innerText = shoppingList.trim();

  drawShelf(seg50, seg75, seg100, color);
}

function drawShelf(seg50, seg75, seg100, color) {
  const container = document.getElementById("shelf-container");
  container.innerHTML = "";

  const segments = [];
  for (let i = 0; i < seg50; i++) segments.push(45);
  for (let i = 0; i < seg75; i++) segments.push(70);
  for (let i = 0; i < seg100; i++) segments.push(95);

  if (segments.length === 0) return;

  const pipeColor = color === "bialy" ? "#eee" : "#888";

  const leftBracket = document.createElement("div");
  leftBracket.className = "bracket bracket-left";
  container.appendChild(leftBracket);

  segments.forEach((length, index) => {
    const segmentDiv = document.createElement("div");
    segmentDiv.className = "segment";

    const pipe = document.createElement("div");
    pipe.className = "pipe";
    pipe.style.width = (length * 2) + "px"; // Skala wizualizacji
    pipe.style.backgroundColor = pipeColor;
    segmentDiv.appendChild(pipe);

    if (length >= 70) {
      const support = document.createElement("div");
      support.className = "support";
      segmentDiv.appendChild(support);
    }

    container.appendChild(segmentDiv);

    if (index < segments.length - 1) {
      const join = document.createElement("div");
      join.className = "bracket bracket-join";
      container.appendChild(join);
    }
  });

  const rightBracket = document.createElement("div");
  rightBracket.className = "bracket bracket-right";
  container.appendChild(rightBracket);
}
</script>

</body>
</html>
