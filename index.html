<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator Półek na filamenty z systemu IKEA Komplement</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 900px;
    }
    h1 {
      text-align: center;
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input[type=number] {
      width: 60px;
      margin-left: 10px;
    }
    select {
      margin-left: 10px;
    }
    button {
      margin-top: 15px;
      padding: 8px 16px;
      font-size: 1rem;
    }
    .container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .left-column, .right-column {
      flex: 1;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
      min-height: 200px;
      white-space: pre-wrap;
      font-family: monospace;
    }
    #length-title {
      margin-top: 30px;
      font-weight: bold;
      font-size: 1.2rem;
    }
    #dimensions {
      background: #e0e0e0;
      padding: 10px;
      font-family: monospace;
      font-size: 1.1rem;
      margin-bottom: 20px;
      border-radius: 4px;
      width: fit-content;
    }
    #shelf-container {
      margin-top: 20px;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 6px;
      background: #fff;
      display: flex;
      align-items: center;
      flex-wrap: nowrap;
      overflow-x: auto;
    }
    .bracket {
      width: 20px;
      height: 40px;
      margin-right: 4px;
      border-radius: 3px;
      flex-shrink: 0;
    }
    .bracket.left {
      background-color: #4CAF50; /* zielony */
    }
    .bracket.right {
      background-color: #4CAF50; /* zielony */
    }
    .bracket.joining {
      background-color: #f44336; /* czerwony */
      width: 10px;
      height: 40px;
      margin-right: 4px;
      flex-shrink: 0;
    }
    .bracket.support {
      background-color: #FFEB3B; /* żółty */
      width: 10px;
      height: 40px;
      margin-right: 4px;
      flex-shrink: 0;
    }
    .pipe {
      height: 10px;
      border-radius: 3px;
      margin-right: 4px;
      flex-shrink: 0;
    }
    /* kolory rur */
    .pipe.white {
      background-color: #f0f0f0;
      border: 1px solid #ccc;
    }
    .pipe.gray {
      background-color: #999;
    }
    /* legenda */
    #legend {
      margin-top: 30px;
      font-size: 0.9rem;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 3px;
      border: 1px solid #333;
    }
    .legend-left, .legend-right {
      background-color: #4CAF50;
    }
    .legend-join {
      background-color: #f44336;
    }
    .legend-support {
      background-color: #FFEB3B;
    }
  </style>
</head>
<body>
  <select id="langSelect" style="margin-bottom:20px;">
    <option value="pl" selected>Polski</option>
    <option value="en">English</option>
  </select>

  <h1 id="title">Kalkulator Półek na filamenty z systemu IKEA Komplement</h1>
  <p id="desc">Wybierz swoje segmenty</p>

  <label id="label-50">Segmenty z IKEA Komplement 50 cm
    <input type="number" id="seg50" min="0" value="0" />
  </label>
  <label id="label-75">Segmenty z IKEA Komplement 75 cm
    <input type="number" id="seg75" min="0" value="0" />
  </label>
  <label id="label-100">Segmenty z IKEA Komplement 100 cm
    <input type="number" id="seg100" min="0" value="0" />
  </label>

  <label id="label-color">Kolor drążków
    <select id="pipeColor">
      <option value="white">Biały</option>
      <option value="gray">Szary</option>
    </select>
  </label>

  <button id="btn-calc">Oblicz</button>

  <h3 id="length-title">Długość</h3>
  <pre id="dimensions"></pre>

  <div class="container">
    <div class="left-column">
      <h3 id="header-dimensions">Wymiary i wsporniki</h3>
      <pre id="output"></pre>
    </div>
    <div class="right-column">
      <h3 id="header-shopping">Zakupy w IKEA</h3>
      <pre id="shoppingList"></pre>
    </div>
  </div>

  <div id="shelf-container"></div>

  <div id="legend">
    <div class="legend-item"><div class="legend-color legend-left"></div><span id="legend-left">Wspornik lewy i prawy</span></div>
    <div class="legend-item"><div class="legend-color legend-join"></div><span id="legend-right">Wspornik łączący</span></div>
    <div class="legend-item"><div class="legend-color legend-support"></div><span id="legend-support">Wspornik podtrzymujący (75 i 100 cm)</span></div>
  </div>

  <script>
    const texts = {
      pl: {
        title: "Kalkulator Półek na filamenty z systemu IKEA Komplement",
        desc: "Wybierz swoje segmenty",
        labels: {
          seg50: "Segmenty z IKEA Komplement 50 cm",
          seg75: "Segmenty z IKEA Komplement 75 cm",
          seg100: "Segmenty z IKEA Komplement 100 cm",
          pipeColor: "Kolor drążków",
          btnCalc: "Oblicz",
          headerDimensions: "Wymiary i wsporniki",
          headerShopping: "Zakupy w IKEA",
        },
        pipeColors: {
          bialy: "Biały",
          szary: "Szary"
        },
        legendLeft: "Wspornik lewy i prawy",
        legendRight: "Wspornik łączący",
        legendSupport: "Wspornik podtrzymujący (75 i 100 cm)",
        ikeaCodes: {
          50: "902.568.93",
          75: "402.568.95",
          100: "302.568.91"
        },
        noSegments: "Wybierz co najmniej jeden segment.",
        lengthLabel: "Długość"
      },
      en: {
        title: "IKEA Komplement Filament Shelf Calculator",
        desc: "Select your segments",
        labels: {
          seg50: "IKEA Komplement Segments 50 cm",
          seg75: "IKEA Komplement Segments 75 cm",
          seg100: "IKEA Komplement Segments 100 cm",
          pipeColor: "Rod color",
          btnCalc: "Calculate",
          headerDimensions: "Dimensions and Brackets",
          headerShopping: "IKEA Shopping List",
        },
        pipeColors: {
          bialy: "White",
          szary: "Gray"
        },
        legendLeft: "Left and right bracket",
        legendRight: "Joining bracket",
        legendSupport: "Supporting bracket (75 & 100 cm)",
        ikeaCodes: {
          50: "402.569.42",
          75: "002.569.44",
          100: "802.569.40"
        },
        noSegments: "Select at least one segment.",
        lengthLabel: "Length"
      }
    };

    let currentLang = "pl";

    const langSelect = document.getElementById("langSelect");
    langSelect.addEventListener("change", () => {
      currentLang = langSelect.value;
      updateTexts();
    });

    function updateTexts() {
      const t = texts[currentLang];
      document.getElementById("title").textContent = t.title;
      document.getElementById("desc").textContent = t.desc;
      document.getElementById("label-50").firstChild.textContent = t.labels.seg50 + " ";
      document.getElementById("label-75").firstChild.textContent = t.labels.seg75 + " ";
      document.getElementById("label-100").firstChild.textContent = t.labels.seg100 + " ";
      document.getElementById("label-color").childNodes[0].textContent = t.labels.pipeColor + " ";
      document.getElementById("btn-calc").textContent = t.labels.btnCalc;
      document.getElementById("header-dimensions").textContent = t.labels.headerDimensions;
      document.getElementById("header-shopping").textContent = t.labels.headerShopping;
      document.getElementById("legend-left").textContent = t.legendLeft;
      document.getElementById("legend-right").textContent = t.legendRight;
      document.getElementById("legend-support").textContent = t.legendSupport;
      document.getElementById("length-title").textContent = t.lengthLabel;
    }

    updateTexts();

    const seg50 = document.getElementById("seg50");
    const seg75 = document.getElementById("seg75");
    const seg100 = document.getElementById("seg100");
    const pipeColorSelect = document.getElementById("pipeColor");
    const btnCalc = document.getElementById("btn-calc");
    const output = document.getElementById("output");
    const shoppingList = document.getElementById("shoppingList");
    const dimensions = document.getElementById("dimensions");
    const shelfContainer = document.getElementById("shelf-container");

    function calculate() {
      const count50 = parseInt(seg50.value) || 0;
      const count75 = parseInt(seg75.value) || 0;
      const count100 = parseInt(seg100.value) || 0;

      if (count50 + count75 + count100 === 0) {
        alert(texts[currentLang].noSegments);
        return;
      }

      const pipeColor = pipeColorSelect.value;

      // Wymiary rur segmentów
      const segmentLengths = {
        50: 50,
        75: 75,
        100: 100
      };

      // Wsporniki - w cm
      const bracketLeftRight = 6; // szerokość wspornika lewego/prawego
      const bracketJoining = 4; // szerokość wspornika łączącego
      const bracketSupport75_100 = 3; // wspornik podtrzymujący dla 75 i 100

      // Lista segmentów do ułożenia (kolejność: 50,75,100)
      const segments = [];
      for (let i = 0; i < count50; i++) segments.push(50);
      for (let i = 0; i < count75; i++) segments.push(75);
      for (let i = 0; i < count100; i++) segments.push(100);

      // Oblicz długość rur (suma segmentów)
      const totalPipeLength = segments.reduce((a, b) => a + b, 0);

      // Oblicz długość wsporników:
      // 1x wspornik lewy + 1x wspornik prawy + (n-1)*wspornik łączący
      // plus dodatkowe wsporniki podtrzymujące dla 75 i 100
      const countJoiningBrackets = segments.length > 1 ? segments.length - 1 : 0;

      // Liczba wsporników podtrzymujących dla 75 i 100 segmentów (po jednym na taki segment)
      const supportBracketsCount = segments.filter(s => s === 75 || s === 100).length;

      // Całkowita długość
      const totalLength =
        totalPipeLength +
        bracketLeftRight * 2 + // lewy i prawy wspornik
        bracketJoining * countJoiningBrackets +
        bracketSupport75_100 * supportBracketsCount;

      // Wyświetlanie wymiarów i wsporników
      // Wsporniki wyświetlamy łącznie, każdy tylko raz (lewy i prawy)
      let dimText = "";
      dimText += `Wspornik lewy: ${bracketLeftRight} cm\n`;
      dimText += `Wspornik prawy: ${bracketLeftRight} cm\n`;
      dimText += `Wspornik łączący: ${bracketJoining} cm x ${countJoiningBrackets}\n`;
      dimText += `Wspornik podtrzymujący (75 i 100): ${bracketSupport75_100} cm x ${supportBracketsCount}\n\n`;

      dimText += "Segmenty:\n";
      let segCount = {};
      for (const s of [50, 75, 100]) segCount[s] = 0;
      segments.forEach(s => segCount[s]++);
      for (const s of [50, 75, 100]) {
        if (segCount[s] > 0) dimText += `- ${s} cm x ${segCount[s]} (kod IKEA: ${texts[currentLang].ikeaCodes[s]})\n`;
      }

      dimText += `\nŁączna długość półki: ${totalLength} cm\n`;

      // Lista zakupów
      let shoppingText = "";
      shoppingText += `Wspornik lewy: 1 szt\n`;
      shoppingText += `Wspornik prawy: 1 szt\n`;
      if (countJoiningBrackets > 0) shoppingText += `Wspornik łączący: ${countJoiningBrackets} szt\n`;
      if (supportBracketsCount > 0) shoppingText += `Wspornik podtrzymujący: ${supportBracketsCount} szt\n`;
      for (const s of [50, 75, 100]) {
        if (segCount[s] > 0) shoppingText += `Segment ${s} cm: ${segCount[s]} szt (kod IKEA: ${texts[currentLang].ikeaCodes[s]})\n`;
      }

      output.textContent = dimText;
      shoppingList.textContent = shoppingText;

      // Wyświetl długość w nagłówku i wymiarach
      dimensions.textContent = `Suma rur: ${totalPipeLength} cm\n` +
                               `Suma wsporników: ${(bracketLeftRight * 2) + (bracketJoining * countJoiningBrackets) + (bracketSupport75_100 * supportBracketsCount)} cm\n` +
                               `Łączna długość półki: ${totalLength} cm`;

      // Wizualizacja
      shelfContainer.innerHTML = "";

      // Dodaj wspornik lewy
      const bracketLeftDiv = document.createElement("div");
      bracketLeftDiv.className = "bracket left";
      shelfContainer.appendChild(bracketLeftDiv);

      // Iteruj przez segmenty, dodaj rurę i wspornik łączący (poza ostatnim)
      segments.forEach((seg, i) => {
        const pipeDiv = document.createElement("div");
        pipeDiv.className = `pipe ${pipeColor}`;
        pipeDiv.style.width = seg * 3 + "px"; // skalowanie x3 dla lepszej widoczności
        shelfContainer.appendChild(pipeDiv);

        // Jeśli segment 75 lub 100 to dodaj wspornik podtrzymujący
        if (seg === 75 || seg === 100) {
          const supportDiv = document.createElement("div");
          supportDiv.className = "bracket support";
          shelfContainer.appendChild(supportDiv);
        }

        if (i < segments.length - 1) {
          const joinDiv = document.createElement("div");
          joinDiv.className = "bracket joining";
          shelfContainer.appendChild(joinDiv);
        }
      });

      // Dodaj wspornik prawy
      const bracketRightDiv = document.createElement("div");
      bracketRightDiv.className = "bracket right";
      shelfContainer.appendChild(bracketRightDiv);
    }

    btnCalc.addEventListener("click", calculate);
  </script>
</body>
</html>
