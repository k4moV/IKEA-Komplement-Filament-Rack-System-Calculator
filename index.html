<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Kalkulator Półek na filamenty z systemu IKEA Komplement</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
      max-width: 900px;
    }
    h1 {
      text-align: center;
    }
    label {
      display: block;
      margin: 10px 0 5px;
    }
    input[type=number] {
      width: 60px;
      margin-left: 10px;
    }
    select {
      margin-left: 10px;
    }
    button {
      margin-top: 15px;
      padding: 8px 16px;
      font-size: 1rem;
    }
    .container {
      display: flex;
      gap: 20px;
      margin-top: 20px;
    }
    .left-column, .right-column {
      flex: 1;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 8px;
      box-shadow: 0 0 5px #ccc;
      min-height: 200px;
      white-space: pre-wrap;
      font-family: monospace;
    }
    #length-title {
      margin-top: 30px;
      font-weight: bold;
      font-size: 1.2rem;
    }
    #dimensions {
      background: #e0e0e0;
      padding: 10px;
      font-family: monospace;
      font-size: 1.1rem;
      margin-bottom: 20px;
      border-radius: 4px;
      width: fit-content;
    }
    #shelf-container {
      margin-top: 20px;
      border: 1px solid #ddd;
      padding: 10px;
      border-radius: 6px;
      background: #fff;
    }
    .segment {
      display: flex;
      align-items: center;
      margin-bottom: 6px;
    }
    .bracket {
      width: 20px;
      height: 40px;
      margin-right: 4px;
      border-radius: 3px;
    }
    .bracket.left, .bracket.right {
      background-color: #4CAF50; /* zielony */
    }
    .bracket.joining {
      background-color: #f44336; /* czerwony */
      width: 10px;
      height: 40px;
      margin-right: 4px;
    }
    .bracket.support {
      background-color: #FFEB3B; /* żółty */
      width: 10px;
      height: 40px;
      margin-right: 4px;
    }
    .pipe {
      height: 10px;
      border-radius: 3px;
      margin-right: 4px;
      background-color: #000;
    }
    /* kolory rur */
    .pipe.white {
      background-color: #f0f0f0;
      border: 1px solid #ccc;
    }
    .pipe.gray {
      background-color: #999;
    }
    /* legenda */
    #legend {
      margin-top: 30px;
      font-size: 0.9rem;
      display: flex;
      gap: 15px;
      flex-wrap: wrap;
      align-items: center;
    }
    .legend-item {
      display: flex;
      align-items: center;
      gap: 6px;
    }
    .legend-color {
      width: 20px;
      height: 20px;
      border-radius: 3px;
      border: 1px solid #333;
    }
    .legend-left, .legend-right {
      background-color: #4CAF50;
    }
    .legend-join {
      background-color: #f44336;
    }
    .legend-support {
      background-color: #FFEB3B;
    }
  </style>
</head>
<body>
  <h1 id="title">Kalkulator Półek na filamenty z systemu IKEA Komplement</h1>
  <p id="desc">Wybierz swoje segmenty</p>

  <label id="label-50">Segmenty z IKEA Komplement 50 cm
    <input type="number" id="seg50" min="0" value="0" />
  </label>
  <label id="label-75">Segmenty z IKEA Komplement 75 cm
    <input type="number" id="seg75" min="0" value="0" />
  </label>
  <label id="label-100">Segmenty z IKEA Komplement 100 cm
    <input type="number" id="seg100" min="0" value="0" />
  </label>

  <label id="label-color">Kolor drążków
    <select id="pipeColor">
      <option value="white">Biały</option>
      <option value="gray">Szary</option>
    </select>
  </label>

  <button id="btn-calc">Oblicz</button>

  <h3 id="length-title">Długość</h3>
  <pre id="dimensions"></pre>

  <div class="container">
    <div class="left-column">
      <h3 id="header-dimensions">Wymiary i wsporniki</h3>
      <pre id="output"></pre>
    </div>
    <div class="right-column">
      <h3 id="header-shopping">Zakupy w IKEA</h3>
      <pre id="shoppingList"></pre>
    </div>
  </div>

  <div id="shelf-container"></div>

  <div id="legend">
    <div class="legend-item"><div class="legend-color legend-left"></div><span id="legend-left">Wspornik lewy i prawy</span></div>
    <div class="legend-item"><div class="legend-color legend-join"></div><span id="legend-right">Wspornik łączący</span></div>
    <div class="legend-item"><div class="legend-color legend-support"></div><span id="legend-support">Wspornik podtrzymujący (75 i 100 cm)</span></div>
  </div>

  <script>
    const texts = {
      pl: {
        title: "Kalkulator Półek na filamenty z systemu IKEA Komplement",
        desc: "Wybierz swoje segmenty",
        labels: {
          seg50: "Segmenty z IKEA Komplement 50 cm",
          seg75: "Segmenty z IKEA Komplement 75 cm",
          seg100: "Segmenty z IKEA Komplement 100 cm",
          pipeColor: "Kolor drążków",
          btnCalc: "Oblicz",
          headerDimensions: "Wymiary i wsporniki",
          headerShopping: "Zakupy w IKEA",
        },
        pipeColors: {
          bialy: "Biały",
          szary: "Szary"
        },
        legendLeft: "Wspornik lewy i prawy",
        legendRight: "Wspornik łączący",
        legendSupport: "Wspornik podtrzymujący (75 i 100 cm)",
        ikeaCodes: {
          50: "902.568.93",
          75: "402.568.95",
          100: "302.568.91"
        },
        noSegments: "Wybierz co najmniej jeden segment.",
      },
      en: {
        title: "IKEA Komplement Filament Shelf Calculator",
        desc: "Select your segments",
        labels: {
          seg50: "IKEA Komplement Segments 50 cm",
          seg75: "IKEA Komplement Segments 75 cm",
          seg100: "IKEA Komplement Segments 100 cm",
          pipeColor: "Rod color",
          btnCalc: "Calculate",
          headerDimensions: "Dimensions and Brackets",
          headerShopping: "IKEA Shopping List",
        },
        pipeColors: {
          bialy: "White",
          szary: "Gray"
        },
        legendLeft: "Left and right bracket",
        legendRight: "Joining bracket",
        legendSupport: "Supporting bracket (75 & 100 cm)",
        ikeaCodes: {
          50: "402.569.42",
          75: "002.569.44",
          100: "802.569.40"
        },
        noSegments: "Select at least one segment.",
      }
    };

    let currentLang = "pl";

    // Stwórz selektor języka
    const langSelector = document.createElement("select");
    langSelector.innerHTML = `
      <option value="pl">Polski</option>
      <option value="en">English</option>
    `;
    langSelector.style.marginBottom = "20px";
    langSelector.addEventListener("change", () => {
      setLanguage(langSelector.value);
    });
    document.body.insertBefore(langSelector, document.body.firstChild);

    function setLanguage(lang) {
      currentLang = lang;
      const t = texts[lang];

      document.getElementById("title").innerText = t.title;
      document.getElementById("desc").innerText = t.desc;
      document.getElementById("label-50").firstChild.textContent = t.labels.seg50;
      document.getElementById("label-75").firstChild.textContent = t.labels.seg75;
      document.getElementById("label-100").firstChild.textContent = t.labels.seg100;
      document.getElementById("label-color").firstChild.textContent = t.labels.pipeColor;
      document.getElementById("btn-calc").innerText = t.labels.btnCalc;
      document.getElementById("header-dimensions").innerText = t.labels.headerDimensions;
      document.getElementById("header-shopping").innerText = t.labels.headerShopping;

      document.getElementById("legend-left").innerText = t.legendLeft;
      document.getElementById("legend-right").innerText = t.legendRight;
      document.getElementById("legend-support").innerText = t.legendSupport;

      document.getElementById("length-title").innerText = lang === "pl" ? "Długość" : "Length";

      // Kolory rur w select
      const pipeColorSelect = document.getElementById("pipeColor");
      pipeColorSelect.options[0].text = t.pipeColors.bialy;
      pipeColorSelect.options[1].text = t.pipeColors.szary;

      // Wyczyść wyniki
      document.getElementById("output").innerText = "";
      document.getElementById("shoppingList").innerText = "";
      document.getElementById("dimensions").innerText = "";
      document.getElementById("shelf-container").innerHTML = "";
    }

    function calculate() {
      const t = texts[currentLang];
      const seg50 = parseInt(document.getElementById("seg50").value) || 0;
      const seg75 = parseInt(document.getElementById("seg75").value) || 0;
      const seg100 = parseInt(document.getElementById("seg100").value) || 0;

      const pipeColor = document.getElementById("pipeColor").value;
      const totalSegments = seg50 + seg75 + seg100;
      if (totalSegments === 0) {
        document.getElementById("dimensions").innerText = "";
        document.getElementById("output").innerText = t.noSegments;
        document.getElementById("shoppingList").innerText = t.noSegments;
        document.getElementById("shelf-container").innerHTML = "";
        return;
      }

      const lengths = {50: 450, 75: 700, 100: 950};
      const leftBracketCount = 1;
      const rightBracketCount = 1;
      const joiningBrackets = totalSegments > 1 ? totalSegments - 1 : 0;
      const supportBrackets = seg75 + seg100;

      let lengthSegments = 0;
      lengthSegments += seg50 * 2 * lengths[50];
      lengthSegments += seg75 * 2 * lengths[75];
      lengthSegments += seg100 * 2 * lengths[100];

      let totalLength = lengthSegments + (leftBracketCount + rightBracketCount) * 20 + joiningBrackets * 10;

      // WYŚWIETLAMY TYLKO DŁUGOŚĆ W POLU #dimensions
      document.getElementById("dimensions").innerText = totalLength + " mm";

      // Wsporniki w lewej kolumnie
      let outputText = "";
      outputText += `• 1 × ${t.legendLeft}\n`;
      outputText += `• 1 × ${t.legendLeft}\n`; // oba: lewy i prawy mają ten sam tekst
      if (joiningBrackets > 0) outputText += `• ${joiningBrackets} × ${t.legendRight}\n`;
      if (supportBrackets > 0) outputText += `• ${supportBrackets} × ${t.legendSupport}\n`;
      document.getElementById("output").innerText = outputText.trim();

      // Lista zakupów IKEA (TYLKO rury)
      let shoppingList = "";
      if (totalSegments === 0) {
        shoppingList = t.noSegments;
      } else {
        if (seg50 > 0) shoppingList += `• ${seg50 * 2} × IKEA KOMPLEMENT 50 cm (${t.ikeaCodes[50]})\n`;
        if (seg75 > 0) shoppingList += `• ${seg75 * 2} × IKEA KOMPLEMENT 75 cm (${t.ikeaCodes[75]})\n`;
        if (seg100 > 0) shoppingList += `• ${seg100 * 2} × IKEA KOMPLEMENT 100 cm (${t.ikeaCodes[100]})\n`;
        shoppingList = shoppingList.trim();
      }
      document.getElementById("shoppingList").innerText = shoppingList;

      drawShelf(seg50, seg75, seg100, pipeColor);
    }

    function drawShelf(seg50, seg75, seg100, pipeColor) {
      const container = document.getElementById("shelf-container");
      container.innerHTML = "";

      const pipeClasses = {
        white: "white",
        gray: "gray"
      };
      const pipeHeight = 10;

      // Funkcja tworząca div wspornika
      function createBracket(type) {
        const div = document.createElement("div");
        div.classList.add("bracket");
        if(type === "left" || type === "right") div.classList.add("left"); // lewy i prawy zielony
        if(type === "joining") div.classList.add("joining"); // czerwony
        if(type === "support") div.classList.add("support"); // żółty
        return div;
      }

      // Funkcja tworząca div rury o określonej długości
      function createPipe(length) {
        const div = document.createElement("div");
        div.classList.add("pipe");
        div.classList.add(pipeClasses[pipeColor]);
        div.style.width = length + "px";
        div.style.height = pipeHeight + "px";
        return div;
      }

      // Wszystkie segmenty w tablicy do pętli
      const segments = [];
      for(let i = 0; i < seg50; i++) segments.push(50);
      for(let i = 0; i < seg75; i++) segments.push(75);
      for(let i = 0; i < seg100; i++) segments.push(100);

      if(segments.length === 0) return;

      // Lewy wspornik
      container.appendChild(createBracket("left"));

      segments.forEach((seg, i) => {
        // 2 rury
        container.appendChild(createPipe({50:450, 75:700, 100:950}[seg]));
        container.appendChild(createPipe({50:450, 75:700, 100:950}[seg]));

        // wspornik podtrzymujący jeśli 75 lub 100
        if(seg === 75 || seg === 100) {
          container.appendChild(createBracket("support"));
        }

        // wspornik łączący jeśli nie ostatni segment
        if(i < segments.length - 1) {
          container.appendChild(createBracket("joining"));
        }
      });

      // Prawy wspornik
      container.appendChild(createBracket("right"));
    }

    document.getElementById("btn-calc").addEventListener("click", calculate);

    // Start w języku polskim
    setLanguage("pl");
  </script>
</body>
</html>
