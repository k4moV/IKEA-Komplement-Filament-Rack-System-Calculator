<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kalkulator Półek na filamenty z systemu IKEA Komplement</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      padding: 20px;
      background-color: #f2f2f2;
    }
    h1, h2 {
      margin-top: 0;
    }
    .section {
      background-color: #ffffff;
      padding: 15px;
      margin-bottom: 20px;
      border-radius: 8px;
      box-shadow: 0 0 5px rgba(0,0,0,0.1);
    }
    .flex {
      display: flex;
      gap: 20px;
    }
    .column {
      flex: 1;
    }
    .input-group {
      margin-bottom: 10px;
    }
    .input-group label {
      display: block;
      margin-bottom: 5px;
    }
    #visualization {
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      margin-top: 10px;
      gap: 4px;
    }
    .bar {
      height: 20px;
      display: inline-block;
      position: relative;
    }
    .rod-white {
      background-color: #ccc;
    }
    .rod-gray {
      background-color: #888;
    }
    .bracket-left, .bracket-right {
      background-color: green;
      width: 20px;
    }
    .bracket-joining {
      background-color: red;
      width: 10px;
    }
    .bracket-supporting {
      background-color: yellow;
      width: 10px;
      position: absolute;
      left: 50%;
      transform: translateX(-50%);
      top: 0;
      bottom: 0;
    }
    button {
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    ul li {
      margin: 5px 0;
    }
    .green { color: green; }
    .red { color: red; }
    .yellow { color: goldenrod; }
  </style>
</head>
<body>
  <h1>Kalkulator Półek na filamenty z systemu IKEA Komplement</h1>

  <div class="section flex">
    <div class="column">
      <h2>Wybierz swoje segmenty</h2>
      <div class="input-group">
        <label for="seg50">Segmenty z IKEA Komplement 50 cm:</label>
        <input type="number" id="seg50" value="0" min="0">
      </div>
      <div class="input-group">
        <label for="seg75">Segmenty z IKEA Komplement 75 cm:</label>
        <input type="number" id="seg75" value="0" min="0">
      </div>
      <div class="input-group">
        <label for="seg100">Segmenty z IKEA Komplement 100 cm:</label>
        <input type="number" id="seg100" value="0" min="0">
      </div>
      <div class="input-group">
        <label for="color">Kolor drążków:</label>
        <select id="color">
          <option value="white">Biały</option>
          <option value="gray">Szary</option>
        </select>
      </div>
    </div>
    <div class="column" style="display: flex; align-items: center;">
      <button onclick="calculate()">Oblicz</button>
    </div>
  </div>

  <div class="section">
    <h2 id="length-title">Długość całkowita</h2>
    <p id="dimensions">—</p>
  </div>

  <div class="section">
    <div id="visualization"></div>
  </div>

  <div class="section flex">
    <div class="column">
      <h2>Wymiary i wsporniki</h2>
      <ul id="brackets"></ul>
    </div>
    <div class="column">
      <h2>Zakupy w IKEA</h2>
      <ul id="ikea-list"></ul>
    </div>
  </div>

  <script>
    function calculate() {
      const seg50 = parseInt(document.getElementById('seg50').value) || 0;
      const seg75 = parseInt(document.getElementById('seg75').value) || 0;
      const seg100 = parseInt(document.getElementById('seg100').value) || 0;
      const color = document.getElementById('color').value;

      const segmentLengths = { 50: 45, 75: 70, 100: 95 };
      const totalSegments = seg50 + seg75 + seg100;
      const totalPipeLength = seg50 * segmentLengths[50] + seg75 * segmentLengths[75] + seg100 * segmentLengths[100];
      const totalLength = totalPipeLength + 2 + (totalSegments > 1 ? (totalSegments - 1) * 1 : 0);

      document.getElementById("dimensions").innerText = totalLength + " cm";

      const bracketList = [];
      if (totalSegments > 0) {
        bracketList.push('<span class="green">Wspornik lewy (zielony)</span>: 1');
        bracketList.push('<span class="green">Wspornik prawy (zielony)</span>: 1');
        if (totalSegments > 1) {
          bracketList.push('<span class="red">Wspornik łączący (czerwony)</span>: ' + (totalSegments - 1));
        }
      }
      const supportingCount = (seg75 > 0 ? seg75 : 0) + (seg100 > 0 ? seg100 : 0);
      if (supportingCount > 0) {
        bracketList.push('<span class="yellow">Wspornik podtrzymujący (żółty)</span>: ' + supportingCount);
      }
      document.getElementById("brackets").innerHTML = bracketList.map(item => `<li>${item}</li>`).join('');

      const ikeaItems = [];
      const rodCodes = {
        white: { 50: '902.568.93', 75: '402.568.95', 100: '302.568.91' },
        gray: { 50: '402.569.42', 75: '002.569.44', 100: '802.569.40' }
      };
      if (seg50 > 0) ikeaItems.push(`Drążki ${color === 'white' ? 'białe' : 'szare'} 50 cm x ${seg50 * 2} — ${rodCodes[color][50]}`);
      if (seg75 > 0) ikeaItems.push(`Drążki ${color === 'white' ? 'białe' : 'szare'} 75 cm x ${seg75 * 2} — ${rodCodes[color][75]}`);
      if (seg100 > 0) ikeaItems.push(`Drążki ${color === 'white' ? 'białe' : 'szare'} 100 cm x ${seg100 * 2} — ${rodCodes[color][100]}`);
      document.getElementById("ikea-list").innerHTML = ikeaItems.map(item => `<li>${item}</li>`).join('');

      drawVisualization(seg50, seg75, seg100, color);
    }

    function drawVisualization(seg50, seg75, seg100, color) {
      const visualization = document.getElementById("visualization");
      visualization.innerHTML = "";

      const segments = [
        ...Array(seg50).fill(50),
        ...Array(seg75).fill(75),
        ...Array(seg100).fill(100)
      ];

      if (segments.length === 0) return;

      visualization.innerHTML += '<div class="bar bracket-left"></div>';

      segments.forEach((length, index) => {
        const rodLength = { 50: 45, 75: 70, 100: 95 }[length];
        const bar = document.createElement("div");
        bar.className = `bar rod-${color}`;
        bar.style.width = rodLength * 4 + "px"; // scale for display

        if (length === 75 || length === 100) {
          const support = document.createElement("div");
          support.className = "bracket-supporting";
          bar.appendChild(support);
        }

        visualization.appendChild(bar);

        if (index < segments.length - 1) {
          const join = document.createElement("div");
          join.className = "bar bracket-joining";
          visualization.appendChild(join);
        }
      });

      visualization.innerHTML += '<div class="bar bracket-right"></div>';
    }
  </script>
</body>
</html>
